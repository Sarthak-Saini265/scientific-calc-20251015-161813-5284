<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scientific Calculator</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <!-- Google Fonts for a modern look -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

    <style>
        /* Custom styles for a professional calculator look */
        body {
            background-color: #f0f2f5;
            font-family: 'Roboto', sans-serif;
        }

        .calculator {
            max-width: 450px;
            margin: 5vh auto;
            border-radius: 15px;
            background: linear-gradient(145deg, #2c3e50, #34495e);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid #4a627a;
        }

        #display {
            font-family: 'Orbitron', sans-serif;
            background-color: #1c2833;
            color: #ecf0f1;
            border: none;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.5);
            padding: 20px;
            font-size: 2.5rem;
            letter-spacing: 2px;
        }

        .btn {
            font-size: 1.25rem;
            font-weight: 500;
            height: 100%;
            border-radius: 8px;
            border: none;
            transition: all 0.2s ease-in-out;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn-num {
            background-color: #34495e;
            color: #ecf0f1;
        }
        .btn-num:hover {
            background-color: #4a627a;
        }

        .btn-op {
            background-color: #f39c12;
            color: white;
        }
        .btn-op:hover {
            background-color: #e67e22;
        }
        
        .btn-sci {
            background-color: #2980b9;
            color: white;
        }
        .btn-sci:hover {
            background-color: #3498db;
        }

        .btn-equal {
            background-color: #27ae60;
            color: white;
        }
        .btn-equal:hover {
            background-color: #2ecc71;
        }

        .btn-clear {
            background-color: #c0392b;
            color: white;
        }
        .btn-clear:hover {
            background-color: #e74c3c;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="calculator card text-white shadow-lg">
            <div class="card-body p-4">
                <!-- Display Screen -->
                <input type="text" id="display" class="form-control form-control-lg text-end mb-4" readonly placeholder="0">

                <!-- Buttons Grid -->
                <div class="row g-2">
                    <!-- Scientific Functions Panel -->
                    <div class="col-5">
                        <div class="d-grid gap-2">
                            <div class="row g-2">
                                <div class="col-6"><button id="btn-sqrt" class="btn btn-sci p-3" onclick="appendScientific('sqrt(')">√</button></div>
                                <div class="col-6"><button id="btn-square" class="btn btn-sci p-3" onclick="appendScientific('**2')">x²</button></div>
                            </div>
                             <div class="row g-2">
                                <div class="col-6"><button id="btn-sin" class="btn btn-sci p-3" onclick="appendScientific('sin(')">sin</button></div>
                                <div class="col-6"><button id="btn-cos" class="btn btn-sci p-3" onclick="appendScientific('cos(')">cos</button></div>
                            </div>
                            <div class="row g-2">
                                <div class="col-6"><button id="btn-tan" class="btn btn-sci p-3" onclick="appendScientific('tan(')">tan</button></div>
                                <div class="col-6"><button id="btn-pi" class="btn btn-sci p-3" onclick="appendScientific('π')">π</button></div>
                            </div>
                             <div class="row g-2">
                                <div class="col-6"><button id="btn-lparen" class="btn btn-sci p-3" onclick="appendToDisplay('(')">(</button></div>
                                <div class="col-6"><button id="btn-rparen" class="btn btn-sci p-3" onclick="appendToDisplay(')')">)</button></div>
                            </div>
                        </div>
                    </div>

                    <!-- Basic Numbers and Operators Panel -->
                    <div class="col-7">
                        <div class="row g-2">
                            <div class="col-6"><button class="btn btn-clear p-3 w-100" onclick="clearDisplay()">C</button></div>
                            <div class="col-3"><button class="btn btn-op p-3" onclick="appendToDisplay('/')">÷</button></div>
                            <div class="col-3"><button class="btn btn-op p-3" onclick="appendToDisplay('*')">×</button></div>
                        </div>
                        <div class="row g-2 mt-2">
                            <div class="col-3"><button class="btn btn-num p-3" onclick="appendToDisplay('7')">7</button></div>
                            <div class="col-3"><button class="btn btn-num p-3" onclick="appendToDisplay('8')">8</button></div>
                            <div class="col-3"><button class="btn btn-num p-3" onclick="appendToDisplay('9')">9</button></div>
                            <div class="col-3"><button class="btn btn-op p-3" onclick="appendToDisplay('-')">−</button></div>
                        </div>
                        <div class="row g-2 mt-2">
                            <div class="col-3"><button class="btn btn-num p-3" onclick="appendToDisplay('4')">4</button></div>
                            <div class="col-3"><button class="btn btn-num p-3" onclick="appendToDisplay('5')">5</button></div>
                            <div class="col-3"><button class="btn btn-num p-3" onclick="appendToDisplay('6')">6</button></div>
                            <div class="col-3"><button class="btn btn-op p-3" onclick="appendToDisplay('+')">+</button></div>
                        </div>
                        <div class="row g-2 mt-2">
                            <div class="col-9">
                                <div class="row g-2">
                                    <div class="col-4"><button class="btn btn-num p-3" onclick="appendToDisplay('1')">1</button></div>
                                    <div class="col-4"><button class="btn btn-num p-3" onclick="appendToDisplay('2')">2</button></div>
                                    <div class="col-4"><button class="btn btn-num p-3" onclick="appendToDisplay('3')">3</button></div>
                                </div>
                                <div class="row g-2 mt-2">
                                    <div class="col-8"><button class="btn btn-num p-3" onclick="appendToDisplay('0')">0</button></div>
                                    <div class="col-4"><button class="btn btn-num p-3" onclick="appendToDisplay('.')">.</button></div>
                                </div>
                            </div>
                            <div class="col-3">
                                <button class="btn btn-equal p-3 h-100" onclick="calculateResult()">=</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- Inline JavaScript for Calculator Functionality -->
    <script>
        // Get the display element from the DOM
        const display = document.getElementById('display');

        // State variable to track if an error is currently displayed
        let isErrorState = false;

        /**
         * Appends a value (digit, operator) to the display.
         * If an error is shown, it first clears the display.
         * @param {string} value - The character to append.
         */
        function appendToDisplay(value) {
            if (isErrorState) {
                clearDisplay();
            }
            display.value += value;
        }

        /**
         * Appends a scientific function or constant to the display.
         * This function is a bit more specific for handling scientific inputs.
         * @param {string} value - The scientific function or constant string.
         */
        function appendScientific(value) {
            if (isErrorState) {
                clearDisplay();
            }
            display.value += value;
        }

        /**
         * Clears the display and resets the error state.
         */
        function clearDisplay() {
            display.value = '';
            isErrorState = false;
        }

        /**
         * Calculates the result of the expression in the display.
         * Handles syntax and mathematical errors gracefully.
         */
        function calculateResult() {
            // If display is empty or in error state, do nothing.
            if (isErrorState || display.value === '') {
                return;
            }

            try {
                // Sanitize and prepare the expression for evaluation.
                let expression = display.value;

                // Replace user-friendly symbols with JavaScript Math equivalents.
                // Using global replace (RegExp with 'g' flag) for multiple occurrences.
                expression = expression.replace(/π/g, 'Math.PI');
                expression = expression.replace(/√/g, 'Math.sqrt');
                expression = expression.replace(/sin/g, 'Math.sin');
                expression = expression.replace(/cos/g, 'Math.cos');
                expression = expression.replace(/tan/g, 'Math.tan');
                
                // Note: 'x²' is handled by appending '**2', which eval understands natively.
                // Note: '÷' and '×' are handled by appending '/' and '*' directly.

                // Evaluate the sanitized expression.
                // Using a function constructor instead of direct eval for slightly better security context,
                // though for a client-side calculator with button inputs, direct eval is often acceptable.
                const result = new Function('return ' + expression)();

                // Check for invalid results like Infinity or NaN (e.g., from 1/0)
                if (!isFinite(result)) {
                    throw new Error("Math Error"); // Catches division by zero
                }
                
                // Display the result, formatting long decimals.
                display.value = parseFloat(result.toFixed(10));
                isErrorState = false;

            } catch (error) {
                // If any error occurs during evaluation, display "Error".
                display.value = 'Error';
                isErrorState = true;
                console.error("Calculation Error:", error);
            }
        }
        
        // Add keyboard support for a better user experience
        document.addEventListener('keydown', function(event) {
            const key = event.key;
            
            // Prevent default browser actions for certain keys (like '/' for search)
            if (key === '/' || key === '*') {
                event.preventDefault();
            }

            if ((key >= '0' && key <= '9') || key === '.') {
                appendToDisplay(key);
            } else if (['+', '-', '*', '/'].includes(key)) {
                appendToDisplay(key);
            } else if (key === 'Enter' || key === '=') {
                event.preventDefault(); // Prevent form submission if inside a form
                calculateResult();
            } else if (key === 'Backspace') {
                display.value = display.value.slice(0, -1);
            } else if (key === 'Escape' || key.toLowerCase() === 'c') {
                clearDisplay();
            } else if (key === '(' || key === ')') {
                appendToDisplay(key);
            }
        });
    </script>

</body>
</html>